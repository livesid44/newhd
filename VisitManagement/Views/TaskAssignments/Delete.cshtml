@model VisitManagement.Models.TaskAssignment

@{
    ViewData["Title"] = "Delete Task Assignment";
}

<div class="pg-title">
    Delete Task Assignment
</div>
<div class="white-bg-main">
    <h3 class="text-danger">Are you sure you want to delete this task assignment?</h3>
    <div class="alert alert-warning">
        <strong>Warning:</strong> This action cannot be undone.
    </div>
    
    <hr />
    
    <dl class="row">
        <dt class="col-sm-3">@Html.DisplayNameFor(model => model.Visit)</dt>
        <dd class="col-sm-9">
            @if (Model.Visit != null)
            {
                <span>@Model.Visit.AccountName - @Model.Visit.VisitDate.ToString("MM/dd/yyyy")</span>
            }
        </dd>

        <dt class="col-sm-3">@Html.DisplayNameFor(model => model.TaskName)</dt>
        <dd class="col-sm-9">@Model.TaskName</dd>

        <dt class="col-sm-3">@Html.DisplayNameFor(model => model.AssignedToTeam)</dt>
        <dd class="col-sm-9">@Model.AssignedToTeam</dd>

        <dt class="col-sm-3">@Html.DisplayNameFor(model => model.AssignedToPerson)</dt>
        <dd class="col-sm-9">@(Model.AssignedToPerson ?? "N/A")</dd>

        <dt class="col-sm-3">@Html.DisplayNameFor(model => model.DueDate)</dt>
        <dd class="col-sm-9">@Model.DueDate.ToString("MM/dd/yyyy")</dd>

        <dt class="col-sm-3">@Html.DisplayNameFor(model => model.Priority)</dt>
        <dd class="col-sm-9">
            @{
                var priorityClass = Model.Priority switch
                {
                    VisitManagement.Models.TaskPriority.Critical => "badge bg-danger",
                    VisitManagement.Models.TaskPriority.High => "badge bg-warning",
                    VisitManagement.Models.TaskPriority.Medium => "badge bg-info",
                    _ => "badge bg-secondary"
                };
            }
            <span class="@priorityClass">@Model.Priority</span>
        </dd>

        <dt class="col-sm-3">@Html.DisplayNameFor(model => model.Status)</dt>
        <dd class="col-sm-9">
            @{
                var statusClass = Model.Status switch
                {
                    VisitManagement.Models.TaskAssignmentStatus.Completed => "badge bg-success",
                    VisitManagement.Models.TaskAssignmentStatus.InProgress => "badge bg-primary",
                    VisitManagement.Models.TaskAssignmentStatus.Blocked => "badge bg-danger",
                    VisitManagement.Models.TaskAssignmentStatus.Cancelled => "badge bg-secondary",
                    _ => "badge bg-warning"
                };
            }
            <span class="@statusClass">@Model.Status</span>
        </dd>

        <dt class="col-sm-3">@Html.DisplayNameFor(model => model.Description)</dt>
        <dd class="col-sm-9">@(Model.Description ?? "N/A")</dd>
    </dl>
    
    <form asp-action="Delete">
        <input type="hidden" asp-for="Id" />
        <button type="submit" class="btn btn-danger btn-sm">Delete</button>
        <a asp-action="Index" class="btn btn-secondary btn-sm">Cancel</a>
    </form>
</div>
