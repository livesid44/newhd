@model VisitManagement.Models.SmtpSettings

@{
    ViewData["Title"] = "Configure SMTP";
}

<div class="container-fluid mt-3">
    <div class="white-bg-main p-4">
        <div class="row mb-3">
            <div class="col-md-12">
                <h2 class="page-title">Configure SMTP Settings</h2>
                <p class="text-muted">Set up email server configuration for sending notifications</p>
            </div>
        </div>

        <form asp-action="ConfigureSmtp" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label asp-for="Server" class="form-label"></label>
                        <input asp-for="Server" class="form-control" placeholder="smtp.gmail.com" />
                        <span asp-validation-for="Server" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label asp-for="Port" class="form-label"></label>
                        <input asp-for="Port" class="form-control" type="number" />
                        <span asp-validation-for="Port" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label asp-for="FromEmail" class="form-label"></label>
                        <input asp-for="FromEmail" class="form-control" placeholder="noreply@example.com" />
                        <span asp-validation-for="FromEmail" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label asp-for="FromName" class="form-label"></label>
                        <input asp-for="FromName" class="form-control" placeholder="Visit Management System" />
                        <span asp-validation-for="FromName" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label asp-for="Username" class="form-label"></label>
                        <input asp-for="Username" class="form-control" placeholder="Optional - SMTP username" />
                        <span asp-validation-for="Username" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label asp-for="Password" class="form-label"></label>
                        <input asp-for="Password" class="form-control" type="password" placeholder="Optional - SMTP password" />
                        <span asp-validation-for="Password" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="mb-3">
                        <label asp-for="DefaultToRecipients" class="form-label"></label>
                        <input asp-for="DefaultToRecipients" class="form-control" placeholder="email1@example.com; email2@example.com" />
                        <span asp-validation-for="DefaultToRecipients" class="text-danger"></span>
                        <small class="form-text text-muted">Separate multiple emails with semicolons or commas.</small>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="mb-3">
                        <label asp-for="DefaultCcRecipients" class="form-label"></label>
                        <input asp-for="DefaultCcRecipients" class="form-control" placeholder="cc1@example.com; cc2@example.com" />
                        <span asp-validation-for="DefaultCcRecipients" class="text-danger"></span>
                        <small class="form-text text-muted">Separate multiple emails with semicolons or commas.</small>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="mb-3">
                        <label asp-for="DefaultBccRecipients" class="form-label"></label>
                        <input asp-for="DefaultBccRecipients" class="form-control" placeholder="bcc1@example.com; bcc2@example.com" />
                        <span asp-validation-for="DefaultBccRecipients" class="text-danger"></span>
                        <small class="form-text text-muted">Separate multiple emails with semicolons or commas.</small>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3 form-check">
                        <input asp-for="EnableSsl" class="form-check-input" />
                        <label asp-for="EnableSsl" class="form-check-label"></label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3 form-check">
                        <input asp-for="EnableNotifications" class="form-check-input" />
                        <label asp-for="EnableNotifications" class="form-check-label"></label>
                    </div>
                </div>
            </div>

            <div class="mt-3">
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-save"></i> Save Settings
                </button>
                <a asp-action="Index" class="btn btn-secondary">
                    <i class="bi bi-x-circle"></i> Cancel
                </a>
            </div>
        </form>

        <div class="mt-4">
            <div class="card">
                <div class="card-header">
                    <h5><i class="bi bi-info-circle"></i> Configuration Tips</h5>
                </div>
                <div class="card-body">
                    <h6>Common SMTP Providers:</h6>
                    <ul>
                        <li><strong>Gmail:</strong> smtp.gmail.com, Port: 587 (TLS) or 465 (SSL)</li>
                        <li><strong>Outlook/Office 365:</strong> smtp.office365.com, Port: 587</li>
                        <li><strong>SendGrid:</strong> smtp.sendgrid.net, Port: 587</li>
                        <li><strong>Amazon SES:</strong> email-smtp.region.amazonaws.com, Port: 587</li>
                    </ul>
                    <p class="mt-3"><strong>Note:</strong> For Gmail, you may need to use an "App Password" instead of your regular password if you have 2-factor authentication enabled.</p>
                    <p class="mt-2"><strong>Default Recipients:</strong> Use the Default To and CC fields to specify email addresses that should receive all visit notifications regardless of who created the visit. This is useful for managers or team leads who need to be notified of all visit activities.</p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
