@model VisitManagement.Models.EmailTemplate

@{
    ViewData["Title"] = "Create Email Template";
}

<div class="container-fluid mt-3">
    <div class="white-bg-main p-4">
        <div class="row mb-3">
            <div class="col-md-12">
                <h2 class="page-title">Create Email Template</h2>
                <p class="text-muted">Create a new email template for visit notifications</p>
            </div>
        </div>

        <form asp-action="CreateTemplate" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <div class="mb-3">
                <label asp-for="Name" class="form-label"></label>
                <input asp-for="Name" class="form-control" placeholder="e.g., Visit Created Notification" />
                <span asp-validation-for="Name" class="text-danger"></span>
            </div>

            <div class="mb-3">
                <label asp-for="TemplateType" class="form-label"></label>
                <select asp-for="TemplateType" class="form-select">
                    <option value="">-- Select Type --</option>
                    <option value="VisitCreated">Visit Created</option>
                    <option value="VisitUpdated">Visit Updated</option>
                </select>
                <span asp-validation-for="TemplateType" class="text-danger"></span>
            </div>

            <div class="mb-3">
                <label asp-for="Subject" class="form-label"></label>
                <input asp-for="Subject" class="form-control" placeholder="e.g., New Visit Scheduled - {AccountName}" />
                <span asp-validation-for="Subject" class="text-danger"></span>
                <small class="form-text text-muted">You can use placeholders like {AccountName}, {VisitDate}, etc.</small>
            </div>

            <div class="mb-3">
                <label asp-for="Body" class="form-label"></label>
                <textarea asp-for="Body" class="form-control" rows="10" placeholder="Email body (HTML supported)"></textarea>
                <span asp-validation-for="Body" class="text-danger"></span>
                <small class="form-text text-muted">HTML is supported. Use placeholders for dynamic content.</small>
            </div>

            <div class="mb-3">
                <label asp-for="ToRecipients" class="form-label"></label>
                <input asp-for="ToRecipients" class="form-control" placeholder="email1@example.com; email2@example.com" />
                <span asp-validation-for="ToRecipients" class="text-danger"></span>
                <small class="form-text text-muted">Separate multiple emails with semicolons (;). If left empty, email will be sent only to the visit creator.</small>
            </div>

            <div class="mb-3">
                <label asp-for="CcRecipients" class="form-label"></label>
                <input asp-for="CcRecipients" class="form-control" placeholder="cc1@example.com; cc2@example.com" />
                <span asp-validation-for="CcRecipients" class="text-danger"></span>
                <small class="form-text text-muted">Separate multiple emails with semicolons (;). Optional CC recipients.</small>
            </div>

            <div class="mb-3">
                <label asp-for="BccRecipients" class="form-label"></label>
                <input asp-for="BccRecipients" class="form-control" placeholder="bcc1@example.com; bcc2@example.com" />
                <span asp-validation-for="BccRecipients" class="text-danger"></span>
                <small class="form-text text-muted">Separate multiple emails with semicolons (;). Optional BCC recipients.</small>
            </div>

            <div class="mb-3 form-check">
                <input asp-for="IsActive" class="form-check-input" checked />
                <label asp-for="IsActive" class="form-check-label"></label>
            </div>

            <div class="mt-3">
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-save"></i> Create Template
                </button>
                <a asp-action="Index" class="btn btn-secondary">
                    <i class="bi bi-x-circle"></i> Cancel
                </a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
